# 什麼時候該用愚蠢的解法？

####

---

某天有同事跟我講了一個故事，大意是這樣：

```
某公司有個重要的服務，很容易壞
每天都必須要有人去重開才能維持正常運作
但要修好他也不難，沒人願意把他修好，寧願每天重啟
因此這間公司做事方法很愚蠢，工程（師）品質很爛
```

身為工程師，理想上當然是越自動化越聰明，我們越開心

故事情境中的公司，只聽轉述可能會覺得做得不好

但也有可能他們「做得還可以」

原因是「修好一個只要重啟就能正常運作的服務」不一定很容易

舉例來說：

## 無法馬上修好

  原本的 open source 套件不接受你的 PR，或是很久才看你的 PR，這時候若要上自己做的「客製化 patch」，一定會引入新的技術債，有兩種可能

  a. 要一直跟進最新的版本避免過多 conflict 最後形同陌路。但很花時間，因為很有可能跟進新版，原本的功能（我們常常仰賴副作用）反而壞了

  b. 不隨時跟進最新的版本，那就不會有社群支援，很久以後反悔想要有社群支援，就得面對排山倒海的 conflict

## 副作用已經被積非成是

  即使這個套件是自己開發的，所以發 PR 去修正有機會很快被 merge

  但很可能之前大家都仰賴這個「錯誤的行為」去做一些事情

  這在資料相依性或外部服務相依性高的公司，會特別嚴重，因為單純的 unit test 不會測得出來，常常實際情況是 code 都對，但是來源資料爛掉了，就導致下游全爛了。

## 環境壞了不能直接修，否則可能影響其他服務

  若問題在機器（VM image, OS, kernel）等執行環境，或很多服務共用的服務，若直接換掉，其他在上面的服務會不會受到影響？

  一個方法是只將壞掉的服務搬到新的環境，但 data dependency 又會來，其他上下游資料流的接口也要跟著搬

## 修不好

  有個真實案例是，各個模組之間有相依性，必須按照「固定順序」重開才會解決

  所以並不像我們以為的改幾行 code 這麼簡單，要找到 root cause 去修就已經很不容易了

## 現在問題來了

假設你是老闆，很不巧地遇到了以上這幾種可能之一，而這時候有另一個簡單的解法：找人按表操課固定重開，他有以下優點：

1. 確保賺錢的服務一定可以正常運作
2. 確保其他服務一定不會受到影響
3. 猴子也會的複雜度，請工讀生都可以馬上上手，而且成本極低，一天可能只花一個人10分鐘
4. 不需要花時間修（特別是很難估計要花多少時間修的時候）

你會選擇修，還是繼續固定重開？

當然這並不是鼓勵不修 bug、不花時間讓工程品質變好

而是任何事情都有輕重緩急

一個好的工程決策，是在適當的時候，花合理的資源去解決痛點

太早或太晚，都會讓整個工程團隊的效率變差
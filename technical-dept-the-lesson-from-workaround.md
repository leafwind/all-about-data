# 技術債：借過一下的慘痛教訓

原文已發佈：[https://data.leafwind.tw/technical-dept-data-path-workaround-b2b1cb03a3a](https://data.leafwind.tw/technical-dept-data-path-workaround-b2b1cb03a3ad)

---

![](/assets/tech-debt.jpeg)

## 開路

所謂開路可能是從網頁爬來的資料，存到 database
可能是某個 server 經過網路再經過一個 aggregator 分配給某一台 worker
可能是平台的資料經過 s3 再 git pull 到某台 server
只要資料從 A 傳到 B 的過程，就比喻做一條路
開路需要很久的時間
準備 DB、寫程式、寫 endpoint、改防火牆規則、肉眼檢查中間沒有 bug 甚至寫 unit test
更重要的是，這可能只為了一個實驗，幾天之後就不需要了

## 借過一下就好

而借用現成的路很快
原本就有傳 json string，多塞一個 key 就好
原本就有寫 DB，多開一個 table 就好
原本你的 server 就有讀某個 table，多讀一個 table 裡面的變數傳出來就好
但未經仔細考慮，就會出現很可怕的設計
總想說暫時用一下，「有空」就會拿掉
但事情總是這樣發展：
A 這條路一旦拿去做 B 用途的事情
先例一開，C D 也都進來
因此 A 就開始為了滿足 B C D 功能，越改越醜

## 還債

就算真的想要幫 B C D 開一條專用的高速公路 E
也要從 A 移植 B C D 的設定到 E，才能將 A 裡面的 B C D 功能退休
這中間還要處理很多 A 當初為了 B C D 特製的各種 workaround
如果卡得久一點，可能 B C D 又改版了，E 的 spec 就要跟著改了

## 從還債中學習

### 沒經驗的時候

只能以「完成需求」為目標，剩下的沒力氣管那麼多

### 還過不少債之後

可能會選擇「簡單的規劃、不會太難做，又能滿足需求，而且不致於利息滾到還不動」的方法

### 組織成長到一個階段之後

可能由 architect 或 CTO 決定，做一個很完整、長期的規劃
但不是這麼簡單的幾個階段而已
隨著（慘痛的）經驗跟技術的成熟，都會讓手邊的選擇變多，想的也會更多
所以有時候回頭看，當年覺得「只能這麼做」的爛方法
其實是因為當時自己的能力不足、工具不夠多、想的也不夠遠
現在遇到的話，就比較知道能怎麼更好的處理它
當然，經驗也不是只有好處
也要避免完全按照經驗做事，而忽略了創新、限制了思考模式